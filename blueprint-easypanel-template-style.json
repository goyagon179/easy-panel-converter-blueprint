{
  "templateVersion": "1.0",
  "defaultName": "pterodactyl-blueprint",
  "displayName": "Pterodactyl with Blueprint Framework",
  "description": "Pterodactyl Panel with Blueprint Framework extensions",
  "publisher": "Blueprint Framework",
  "icon": "https://avatars.githubusercontent.com/u/103425398",
  "source": {
    "type": "easypanel",
    "url": "https://github.com/BlueprintFramework/docker"
  },
  "form": [
    {
      "type": "text",
      "fieldName": "appServiceName",
      "label": "App Service Name",
      "defaultValue": "panel",
      "isRequired": true
    },
    {
      "type": "text", 
      "fieldName": "appUrl",
      "label": "Application URL",
      "defaultValue": "http://localhost"
    },
    {
      "type": "password",
      "fieldName": "dbPassword",
      "label": "Database Password",
      "isRequired": true
    },
    {
      "type": "password",
      "fieldName": "mysqlRootPassword", 
      "label": "MySQL Root Password",
      "isRequired": true
    },
    {
      "type": "password",
      "fieldName": "redisPassword",
      "label": "Redis Password",
      "isRequired": true
    }
  ],
  "services": [
    {
      "type": "app",
      "data": {
        "projectName": "${{defaultName}}",
        "serviceName": "${{appServiceName}}",
        "source": {
          "type": "image",
          "image": "ghcr.io/blueprintframework/blueprint:latest"
        },
        "ports": [
          {
            "published": 80,
            "target": 80
          }
        ],
        "environment": {
          "APP_ENV": "production",
          "APP_DEBUG": "false",
          "APP_URL": "${{appUrl}}",
          "DB_HOST": "mysql",
          "DB_PORT": "3306",
          "DB_DATABASE": "pterodactyl",
          "DB_USERNAME": "pterodactyl",
          "DB_PASSWORD": "${{dbPassword}}",
          "REDIS_HOST": "redis",
          "REDIS_PORT": "6379",
          "REDIS_PASSWORD": "${{redisPassword}}"
        },
        "volumes": [
          {
            "volumeName": "pterodactyl_app",
            "containerPath": "/var/www/html"
          }
        ],
        "restart": "unless-stopped"
      }
    },
    {
      "type": "mysql",
      "data": {
        "projectName": "${{defaultName}}",
        "serviceName": "mysql",
        "rootPassword": "${{mysqlRootPassword}}",
        "password": "${{dbPassword}}",
        "database": "pterodactyl",
        "user": "pterodactyl",
        "volumes": [
          {
            "volumeName": "mysql_data",
            "containerPath": "/var/lib/mysql"
          }
        ],
        "restart": "unless-stopped"
      }
    },
    {
      "type": "redis",
      "data": {
        "projectName": "${{defaultName}}",
        "serviceName": "redis",
        "password": "${{redisPassword}}",
        "volumes": [
          {
            "volumeName": "redis_data",
            "containerPath": "/data"
          }
        ],
        "restart": "unless-stopped"
      }
    }
  ]
}
